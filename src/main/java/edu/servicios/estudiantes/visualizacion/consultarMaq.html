<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="../css/barra.css">
    <link rel="stylesheet" href="../css/maquina.css">
    <title>Lista de Máquinas</title>
</head>
<body>
    <div class="header">
        <h1>Mantenimiento de Software</h1>
    </div>
    <div class="sidebar">
        <div class="logo">
            <img src="perfil.png" alt="Logo">
        </div>
        <ul class="menu">
            <li class="menu-item">
                <a href="#"><i class="fas fa-user"></i>Perfil</a>
                <ul class="submenu">
                    <li><a href="formulario.html"><i class="fas fa-user-plus"></i>Registro</a></li>
                    <li><a href="editarUsuario.html"><i class="fas fa-pencil-alt"></i>Edicion</a></li>
                </ul>
            </li>
            <li class="menu-item">
                <a href="#"><i class="fas fa-cogs"></i>Maquinas</a>
                <ul class="submenu">
                    <li><a href="formularioMaq.html"><i class="fas fa-plus"></i>Insertar maquina</a></li>
                    <li><a href="editarMaq.html"><i class="fas fa-edit"></i>Modificar maquina</a></li>
                    <li><a href="consultarMaq.html"><i class="fas fa-search"></i>Consultar maquina</a></li>
                </ul>
            </li>
            <li class="menu-item">
                <a href="#"><i class="fas fa-tasks"></i>Ordenes de trabajo</a>
                <ul class="submenu">
                    <a href="orden.html"><i class="fas fa-wrench"></i>Orden Preventiva</a></li>
                </ul>
            </li>
            <li class="menu-item">
                <a href="#"><i class="fas fa-chart-bar"></i> Estadísticas</a>
                <ul class="submenu">
                    <a href="historial.html"><i class="far fa-clock"></i> Historial</a></li>
                </ul>
            </li>
        </ul>
    </div>


    <div class="content" style="margin-top: 100px;">
        <h1>Lista de Máquinas</h1>
        <div class="maquinas-lista" id="maquinas-lista">
            <!-- La lista de máquinas se mostrará aquí -->
        </div>
    </div>

    <script>
        fetch('http://localhost:8080/api/maquinas')
            .then(response => response.json())
            .then(maquinas => {
                const maquinasLista = document.getElementById('maquinas-lista');
                
                maquinas.forEach(maquina => {
                    const maquinaItem = document.createElement('div');
                    maquinaItem.classList.add('maquina-item');

                    const imagen = document.createElement('img');
                    imagen.src = 'data:image/png;base64,' + maquina.imagen;
                    imagen.alt = 'Imagen de la máquina';
                    maquinaItem.appendChild(imagen);

                    const nombre = document.createElement('h2');
                    nombre.innerText = maquina.nombre;
                    maquinaItem.appendChild(nombre);

                    const marca = document.createElement('p');
                    marca.innerText = 'Marca: ' + maquina.marca;
                    maquinaItem.appendChild(marca);

                    const modelo = document.createElement('p');
                    modelo.innerText = 'Modelo: ' + maquina.modelo;
                    maquinaItem.appendChild(modelo);

                    // Agrega más campos según tus necesidades

                    maquinasLista.appendChild(maquinaItem);
                });
            })
            .catch(error => {
                console.error('Error al obtener la lista de máquinas:', error);
            });
    </script>
</body>
</html>
